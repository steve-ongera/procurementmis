{% extends 'base.html' %}
{% load static %}

{% block title %}Acknowledge Purchase Order - Supplier Portal{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <div class="card shadow">
                <div class="card-header bg-success text-white">
                    <h4 class="mb-0">
                        <i class="bi bi-check-circle"></i> Acknowledge Purchase Order
                    </h4>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i> 
                        You are about to acknowledge receipt of the following purchase order. 
                        This confirms that you have received and reviewed the PO and agree to fulfill it according to the specified terms.
                    </div>

                    <h5 class="mb-3">Purchase Order Details</h5>
                    
                    <table class="table table-bordered">
                        <tr>
                            <th width="40%">PO Number:</th>
                            <td><strong>{{ po.po_number }}</strong></td>
                        </tr>
                        <tr>
                            <th>PO Date:</th>
                            <td>{{ po.po_date|date:"d M, Y" }}</td>
                        </tr>
                        <tr>
                            <th>Total Amount:</th>
                            <td><strong class="text-success">KES {{ po.total_amount|floatformat:2|intcomma }}</strong></td>
                        </tr>
                        <tr>
                            <th>Delivery Date:</th>
                            <td><strong class="text-primary">{{ po.delivery_date|date:"d M, Y" }}</strong></td>
                        </tr>
                        <tr>
                            <th>Delivery Address:</th>
                            <td>{{ po.delivery_address }}</td>
                        </tr>
                        <tr>
                            <th>Payment Terms:</th>
                            <td>{{ po.payment_terms|truncatewords:20 }}</td>
                        </tr>
                    </table>

                    <div class="alert alert-warning mt-3">
                        <strong><i class="bi bi-exclamation-triangle"></i> Important:</strong>
                        <ul class="mb-0 mt-2">
                            <li>By acknowledging this PO, you confirm your ability to deliver the items as specified.</li>
                            <li>You agree to the delivery date and payment terms stated above.</li>
                            <li>Failure to deliver as agreed may affect your supplier rating and future opportunities.</li>
                        </ul>
                    </div>

                    <form method="post" class="mt-4">
                        {% csrf_token %}
                        
                        <div class="form-check mb-4">
                            <input class="form-check-input" type="checkbox" id="confirmCheck" required>
                            <label class="form-check-label" for="confirmCheck">
                                I confirm that I have read and understood the purchase order terms and conditions, 
                                and I acknowledge receipt of this purchase order.
                            </label>
                        </div>

                        <div class="d-flex justify-content-between">
                            <a href="{% url 'supplier_purchase_order_detail' po.id %}" class="btn btn-secondary">
                                <i class="bi bi-x-circle"></i> Cancel
                            </a>
                            <button type="submit" class="btn btn-success btn-lg">
                                <i class="bi bi-check-circle"></i> Acknowledge Purchase Order
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}