{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block title %}Acknowledge Purchase Order - Supplier Portal{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
<style>
    :root {
        --primary-color: #2563EB;
        --border-color: #E2E8F0;
        --card-bg: #FFFFFF;
        --hover-bg: #F8FAFC;
        --success-color: #10B981;
        --warning-color: #F59E0B;
        --info-color: #3B82F6;
    }

    .acknowledge-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 2rem;
    }

    .page-header {
        margin-bottom: 2rem;
    }

    .page-title {
        font-size: 1.75rem;
        font-weight: 600;
        color: #1E293B;
        margin: 0 0 0.5rem 0;
    }

    .breadcrumb {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.875rem;
        color: #64748B;
    }

    .breadcrumb a {
        color: var(--primary-color);
        text-decoration: none;
        transition: color 0.2s;
    }

    .breadcrumb a:hover {
        color: #1D4ED8;
        text-decoration: underline;
    }

    .breadcrumb i {
        font-size: 0.75rem;
        color: #94A3B8;
    }

    .card {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 0.75rem;
        overflow: hidden;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .card-header {
        background: linear-gradient(135deg, #10B981 0%, #059669 100%);
        padding: 1.5rem;
        color: white;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .card-header h4 {
        margin: 0;
        font-size: 1.25rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .card-body {
        padding: 2rem;
    }

    .alert {
        padding: 1rem 1.25rem;
        border-radius: 0.5rem;
        margin-bottom: 1.5rem;
        border: 1px solid transparent;
        display: flex;
        gap: 0.75rem;
        align-items: flex-start;
    }

    .alert-info {
        background: #F0F9FF;
        border-color: #BAE6FD;
        color: #0369A1;
    }

    .alert-warning {
        background: #FFFBEB;
        border-color: #FDE68A;
        color: #92400E;
    }

    .alert i {
        font-size: 1.125rem;
        flex-shrink: 0;
    }

    .alert ul {
        margin: 0.5rem 0 0 0;
        padding-left: 1.25rem;
    }

    .alert li {
        margin-bottom: 0.25rem;
    }

    .alert li:last-child {
        margin-bottom: 0;
    }

    .section-title {
        font-size: 1.125rem;
        font-weight: 600;
        color: #1E293B;
        margin: 0 0 1rem 0;
        padding-bottom: 0.75rem;
        border-bottom: 2px solid var(--border-color);
    }

    .details-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 1.5rem;
        border: 1px solid var(--border-color);
        border-radius: 0.5rem;
        overflow: hidden;
    }

    .details-table th,
    .details-table td {
        padding: 1rem;
        text-align: left;
        border-bottom: 1px solid var(--border-color);
    }

    .details-table th {
        background: var(--hover-bg);
        font-weight: 600;
        color: #475569;
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        width: 40%;
    }

    .details-table td {
        color: #1E293B;
        font-weight: 500;
    }

    .details-table tr:last-child th,
    .details-table tr:last-child td {
        border-bottom: none;
    }

    .text-success {
        color: var(--success-color);
        font-weight: 600;
    }

    .text-primary {
        color: var(--primary-color);
        font-weight: 600;
    }

    .form-check {
        margin: 2rem 0;
        padding: 1.25rem;
        border: 1px solid var(--border-color);
        border-radius: 0.5rem;
        background: var(--hover-bg);
    }

    .form-check-input {
        width: 1.25rem;
        height: 1.25rem;
        margin-right: 0.75rem;
        margin-top: 0.25rem;
    }

    .form-check-label {
        font-weight: 500;
        color: #1E293B;
        line-height: 1.5;
    }

    .form-actions {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 1rem;
        padding-top: 1.5rem;
        border-top: 1px solid var(--border-color);
    }

    .btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        font-weight: 500;
        font-size: 0.875rem;
        text-decoration: none;
        transition: all 0.2s;
        border: 1px solid transparent;
        cursor: pointer;
    }

    .btn-secondary {
        background: #F1F5F9;
        color: #475569;
        border-color: #E2E8F0;
    }

    .btn-secondary:hover {
        background: #E2E8F0;
        border-color: #CBD5E1;
    }

    .btn-success {
        background: linear-gradient(135deg, #10B981 0%, #059669 100%);
        color: white;
        border: none;
        font-weight: 600;
        padding: 0.875rem 2rem;
        font-size: 1rem;
    }

    .btn-success:hover {
        background: linear-gradient(135deg, #059669 0%, #047857 100%);
        transform: translateY(-1px);
        box-shadow: 0 4px 6px -1px rgba(5, 150, 105, 0.2);
    }

    .btn i {
        font-size: 1rem;
    }

    @media (max-width: 768px) {
        .acknowledge-container {
            padding: 1rem;
        }
        
        .card-body {
            padding: 1.5rem;
        }
        
        .form-actions {
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .btn {
            width: 100%;
            justify-content: center;
        }
        
        .details-table th,
        .details-table td {
            padding: 0.75rem;
            font-size: 0.875rem;
        }
    }

    @media (max-width: 480px) {
        .card-body {
            padding: 1rem;
        }
        
        .alert {
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .details-table {
            display: block;
            overflow-x: auto;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="acknowledge-container">
    <!-- Page Header -->
    <div class="page-header">
        <h1 class="page-title">Acknowledge Purchase Order</h1>
        <div class="breadcrumb">
            <a href="{% url 'supplier_dashboard' %}">
                <i class="bi bi-house"></i>
                Dashboard
            </a>
            <i class="bi bi-chevron-right"></i>
            <a href="{% url 'supplier_purchase_order_detail' po.id %}">
                PO: {{ po.po_number }}
            </a>
            <i class="bi bi-chevron-right"></i>
            <span>Acknowledge</span>
        </div>
    </div>

    <!-- Main Card -->
    <div class="card">
        <!-- Card Header -->
        <div class="card-header">
            <h4>
                <i class="bi bi-check-circle"></i> 
                Acknowledge Purchase Order
            </h4>
        </div>

        <!-- Card Body -->
        <div class="card-body">
            <!-- Info Alert -->
            <div class="alert alert-info">
                <i class="bi bi-info-circle"></i>
                <div>
                    You are about to acknowledge receipt of the following purchase order. 
                    This confirms that you have received and reviewed the PO and agree to fulfill it according to the specified terms.
                </div>
            </div>

            <!-- Purchase Order Details -->
            <h5 class="section-title">Purchase Order Details</h5>
            
            <table class="details-table">
                <tr>
                    <th>PO Number</th>
                    <td><strong>{{ po.po_number }}</strong></td>
                </tr>
                <tr>
                    <th>PO Date</th>
                    <td>{{ po.po_date|date:"d M, Y" }}</td>
                </tr>
                <tr>
                    <th>Total Amount</th>
                    <td><span class="text-success">KES {{ po.total_amount|floatformat:2|intcomma }}</span></td>
                </tr>
                <tr>
                    <th>Delivery Date</th>
                    <td><span class="text-primary">{{ po.delivery_date|date:"d M, Y" }}</span></td>
                </tr>
                <tr>
                    <th>Delivery Address</th>
                    <td>{{ po.delivery_address }}</td>
                </tr>
                <tr>
                    <th>Payment Terms</th>
                    <td>{{ po.payment_terms|truncatewords:20 }}</td>
                </tr>
            </table>

            <!-- Warning Alert -->
            <div class="alert alert-warning">
                <i class="bi bi-exclamation-triangle"></i>
                <div>
                    <strong>Important:</strong>
                    <ul>
                        <li>By acknowledging this PO, you confirm your ability to deliver the items as specified.</li>
                        <li>You agree to the delivery date and payment terms stated above.</li>
                        <li>Failure to deliver as agreed may affect your supplier rating and future opportunities.</li>
                    </ul>
                </div>
            </div>

            <!-- Acknowledgement Form -->
            <form method="post">
                {% csrf_token %}
                
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="confirmCheck" required>
                    <label class="form-check-label" for="confirmCheck">
                        I confirm that I have read and understood the purchase order terms and conditions, 
                        and I acknowledge receipt of this purchase order.
                    </label>
                </div>

                <div class="form-actions">
                    <a href="{% url 'supplier_purchase_order_detail' po.id %}" class="btn btn-secondary">
                        <i class="bi bi-x-circle"></i> Cancel
                    </a>
                    <button type="submit" class="btn btn-success">
                        <i class="bi bi-check-circle"></i> Acknowledge Purchase Order
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}